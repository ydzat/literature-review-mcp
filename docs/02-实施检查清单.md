# 实施检查清单
## ArXiv MCP Server 学术化改造

---

## 📅 总体时间规划

| 阶段 | 功能 | 时间 | 状态 |
|------|------|------|------|
| Phase 0 | 数据库基础设施 + 存储架构重构 | 3-5 天 | [ ] |
| Phase 1 | 多源数据库集成 + 作者/机构声誉系统 | 1-2 周 | [ ] |
| Phase 2 | 文献综述自动化 + Notion 输出 | 1-2 周 | [ ] |
| Phase 3 | 论文质量评估 | 1 周 | [ ] |
| Phase 4 | 测试、优化、文档 | 1 周 | [ ] |
| **总计** | | **4.5-5.5 周** | [ ] |

---

## 📋 Phase 0: 数据库基础设施 + 存储架构重构（3-5 天）

### 数据库设置
- [x] 添加 `better-sqlite3` 依赖
- [x] 创建 `src/database/` 目录
- [x] 创建 `src/database/schema.sql` - 数据库表结构
- [x] 创建 `src/database/DatabaseManager.ts` - 数据库管理器
- [x] 实现数据库初始化和迁移

### 核心数据库功能
- [x] 实现 `papers` 表的 CRUD 操作
- [x] 实现 `authors` 表的 CRUD 操作
- [x] 实现 `institutions` 表的 CRUD 操作
- [x] 实现关系表（paper_authors, paper_institutions, etc.）
- [x] 实现缓存表（api_cache）

### 存储架构重构
- [x] 创建 `src/storage/` 目录
- [x] 实现 `StorageManager.ts` - 统一存储管理
- [x] 实现 PDF 文件管理（集成在 StorageManager）
- [x] 实现缓存管理（使用数据库）
- [ ] 迁移现有 WORK_DIR 逻辑到 `~/.arxiv-mcp/`

### 查询优化
- [ ] 实现常用查询方法（按作者、机构、时间等）
- [ ] 添加数据库索引优化
- [ ] 实现缓存过期自动清理
- [ ] 性能测试和优化

### 单元测试
- [ ] DatabaseManager 单元测试
- [ ] StorageManager 单元测试
- [ ] 缓存功能测试
- [ ] 性能基准测试

---

## 📋 Phase 1: 多源数据库集成 + 作者/机构声誉系统（1-2 周）

### 基础设施
- [ ] 创建 `src/sources/` 目录结构
- [ ] 创建 `src/sources/base.ts` - 统一接口
- [ ] 创建 `src/utils/sourceFactory.ts` - 数据源工厂
- [ ] 创建 `src/utils/qualityRanker.ts` - 质量排序
- [ ] 集成数据库存储（替代 JSON 文件）

### DBLP 集成（免费，优先）
- [ ] 创建 `src/sources/dblp.ts`
- [ ] 实现搜索功能
- [ ] 实现论文详情获取
- [ ] 集成数据库存储（自动缓存到 papers 表）
- [ ] 添加 MCP 工具 `search_dblp`
- [ ] 单元测试

### OpenReview 集成（免费，优先）
- [ ] 创建 `src/sources/openreview.ts`
- [ ] 实现搜索功能
- [ ] 实现评审信息提取
- [ ] 添加 MCP 工具 `search_openreview`
- [ ] 单元测试

### Papers With Code 集成（免费，优先）
- [ ] 创建 `src/sources/paperswithcode.ts`
- [ ] 实现搜索功能
- [ ] 实现代码可用性检测
- [ ] 添加 MCP 工具 `search_papers_with_code`
- [ ] 单元测试

### 作者/机构声誉系统
- [ ] 创建 `src/reputation/authorReputation.ts`
- [ ] 创建 `src/reputation/institutionTiers.ts`
- [ ] 创建 `src/reputation/topAuthors.ts` - 知名学者库
- [ ] 实现作者声誉评分算法
- [ ] 实现机构等级评分
- [ ] 实现论文作者声誉评分
- [ ] 集成数据库（authors 和 institutions 表）
- [ ] 单元测试

### 新论文处理系统（最近 30 天）
- [ ] 实现 `calculateDaysFromPublication()` 函数
- [ ] 实现 `getQualityWeights()` 动态权重函数
- [ ] 实现 `calculateRecencyBonus()` 新论文加分
- [ ] 实现 `identifyRecentBreakthrough()` 突破性识别
- [ ] 单元测试

### 统一搜索接口
- [ ] 实现 `searchAcrossAllSources()` 多源搜索
- [ ] 实现 `rankPapersByComprehensiveQuality()` 综合排序
- [ ] 实现数据库查询优化（使用索引和 JOIN）
- [ ] 添加 MCP 工具 `search_academic_papers`
- [ ] 添加 MCP 工具 `get_recent_papers`
- [ ] 添加 MCP 工具 `identify_recent_breakthroughs`
- [ ] 集成数据库缓存（api_cache 表）

---

## 📋 Phase 2: 文献综述自动化 + Notion 输出（1-2 周）

### 关键信息提取
- [ ] 创建 `src/analysis/keyInfoExtractor.ts`
- [ ] 实现 `extractPaperKeyInfo()` 方法（temperature=0.1）
- [ ] 实现来源位置标注
- [ ] 集成数据库（存储提取的关键信息）
- [ ] 添加 MCP 工具 `extract_paper_keyinfo`
- [ ] 单元测试

### 论文关系分析
- [ ] 创建 `src/analysis/relationshipAnalyzer.ts`
- [ ] 实现 `analyzePaperRelationships()` 方法
- [ ] 识别关系类型（引用、方法、数据集等）
- [ ] 单元测试

### 大纲生成
- [ ] 创建 `src/review/outlineGenerator.ts`
- [ ] 实现 `generateReviewOutline()` 方法
- [ ] 设计综述结构模板
- [ ] 添加 MCP 工具 `generate_review_outline`
- [ ] 单元测试

### 综述生成
- [ ] 创建 `src/review/reviewGenerator.ts`
- [ ] 实现 `generateFinalReview()` 方法（temperature=0.2）
- [ ] 实现来源映射生成
- [ ] 实现 Markdown 格式化
- [ ] 集成数据库（reviews 表，review_papers 关系表）
- [ ] 添加 MCP 工具 `generate_literature_review_strict`
- [ ] 单元测试

### Notion 输出集成
- [ ] 创建 `src/notion/` 目录
- [ ] 创建 `src/notion/outputFormatter.ts` - Notion 输出格式化
- [ ] 实现 `generateNotionMetadata()` - 生成 notion_metadata
- [ ] 实现 Markdown 到 Notion Block 的转换
- [ ] 为所有工具添加 `notion_metadata` 字段
- [ ] 实现数据库模式生成（论文、作者、机构数据库）
- [ ] 实现页面属性生成
- [ ] 单元测试

### 来源验证
- [ ] 创建 `src/utils/sourceMapper.ts`
- [ ] 实现 `verifyReviewSources()` 方法
- [ ] 添加 MCP 工具 `verify_review_sources`
- [ ] 单元测试

---

## 📋 Phase 3: 论文质量评估（1 周）

### 可信度评估
- [ ] 创建 `src/analysis/credibilityAssessor.ts`
- [ ] 实现 `assessPaperCredibility()` 方法
- [ ] 实现多维度评分（方法论、可重复性、创新性）
- [ ] 集成作者/机构声誉评分
- [ ] 添加 MCP 工具 `assess_paper_credibility`
- [ ] 单元测试

### 质量排序
- [ ] 实现 `rankPapersByCredibility()` 方法
- [ ] 添加 MCP 工具 `rank_papers_by_credibility`
- [ ] 单元测试

---

## 📋 Phase 4: 测试、优化、文档（1 周）

### 代码质量
- [ ] 单元测试覆盖率 > 80%
- [ ] 集成测试完整
- [ ] TypeScript 类型检查
- [ ] ESLint 检查

### 性能优化
- [ ] 缓存机制验证
- [ ] API 调用优化
- [ ] 并发处理优化

### 文档完善
- [ ] API 文档
- [ ] 使用示例
- [ ] 故障排除指南
- [ ] README 更新

---

## 🔧 新增 MCP 工具清单

### Phase 1 工具（多源搜索 + 作者声誉）
- [ ] `search_academic_papers` - 多源搜索
- [ ] `search_dblp` - DBLP 搜索
- [ ] `search_openreview` - OpenReview 搜索
- [ ] `search_papers_with_code` - Papers With Code 搜索
- [ ] `get_author_reputation` - 获取作者声誉
- [ ] `identify_top_authors` - 识别知名学者
- [ ] `get_recent_papers` - 获取最近 30 天新论文
- [ ] `identify_recent_breakthroughs` - 识别突破性新论文
- [ ] `rank_papers_by_quality` - 按综合质量排序

### Phase 2 工具（文献综述）
- [ ] `extract_paper_keyinfo` - 提取关键信息
- [ ] `generate_review_outline` - 生成大纲
- [ ] `generate_literature_review_strict` - 生成综述
- [ ] `verify_review_sources` - 验证来源

### Phase 3 工具（质量评估）
- [ ] `assess_paper_credibility` - 评估可信度
- [ ] `rank_papers_by_credibility` - 按可信度排序

---

## 📊 代码结构检查

### 新增目录
```
src/
├── database/             [ ]
│   ├── DatabaseManager.ts
│   ├── schema.sql
│   └── migrations/
├── storage/              [ ]
│   ├── StorageManager.ts
│   ├── PdfManager.ts
│   └── CacheManager.ts
├── sources/              [ ]
│   ├── base.ts
│   ├── arxiv.ts (迁移)
│   ├── dblp.ts
│   ├── openreview.ts
│   └── paperswithcode.ts
├── reputation/           [ ]
│   ├── authorReputation.ts
│   ├── institutionTiers.ts
│   └── topAuthors.ts
├── analysis/             [ ]
│   ├── keyInfoExtractor.ts
│   ├── relationshipAnalyzer.ts
│   └── credibilityAssessor.ts
├── review/               [ ]
│   ├── outlineGenerator.ts
│   └── reviewGenerator.ts
├── notion/               [ ]
│   ├── outputFormatter.ts
│   └── blockConverter.ts
└── utils/                [ ]
    ├── sourceFactory.ts
    ├── qualityRanker.ts
    └── sourceMapper.ts
```

### 新增存储结构
```
~/.arxiv-mcp/             [ ]
├── arxiv-mcp.db          [ ] SQLite 数据库
├── pdfs/                 [ ] PDF 文件
├── texts/                [ ] 提取的文本
└── config.json           [ ] 配置文件
```

### 修改文件
- [ ] `src/index.ts` - 添加新工具注册，集成数据库
- [ ] `package.json` - 添加新依赖（better-sqlite3）
- [ ] 移除 WORK_DIR 环境变量依赖

---

## ✅ 验收标准

### 功能完整性
- [ ] 所有 Phase 1-3 功能已实现
- [ ] 所有 MCP 工具已注册并可用
- [ ] 多源搜索正常工作
- [ ] 作者/机构声誉评分准确
- [ ] 新论文（≤30 天）评分合理
- [ ] 文献综述生成质量高

### 代码质量
- [ ] 无 TypeScript 错误
- [ ] 无 ESLint 警告
- [ ] 单元测试覆盖率 > 80%

### 性能指标
- [ ] 搜索响应时间 < 5s
- [ ] 综述生成时间 < 30s
- [ ] 缓存命中率 > 70%

### 文档完整性
- [ ] API 文档完整
- [ ] 使用示例完整
- [ ] README 更新

---

## 🎯 关键里程碑

- [ ] **Day 3-5**: 数据库基础设施完成，存储架构重构完成
- [ ] **Week 1 末**: DBLP、OpenReview、Papers With Code 集成完成
- [ ] **Week 2 末**: 作者/机构声誉系统 + 新论文处理完成
- [ ] **Week 3 末**: 文献综述自动化 + Notion 输出完成
- [ ] **Week 4 末**: 质量评估功能完成
- [ ] **Week 5 末**: 所有测试通过，文档完善，准备发布

---

## 💡 注意事项

1. **API 限制**: 注意各数据源的 API 调用限制，实现缓存和速率限制
2. **数据准确性**: 定期验证数据源的准确性
3. **向后兼容**: 保持现有功能的兼容性
4. **错误处理**: 完善错误处理和日志记录
5. **用户反馈**: 收集用户反馈，持续改进

---

**目标**: 打造研究生论文级别的文献综述自动化工具，特别优化 AI 领域的最新技术追踪 🎓

